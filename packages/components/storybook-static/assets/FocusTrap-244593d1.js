import{j as Je}from"./jsx-runtime-e6a661ac.js";import{_ as Qe}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as G}from"./extends-98964cd2.js";import{r as l,R as Xe}from"./index-61bf1805.js";import{c as j,a as Ze,u as er}from"./medium-f4a61dfe.js";import{_ as rr}from"./inheritsLoose-c82a83d4.js";import{_ as nr}from"./defineProperty-f2693585.js";var H="data-focus-lock",se="data-focus-lock-disabled",tr="data-no-focus-lock",ar="data-autofocus-inside",ur="data-no-autofocus",U={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},de=j({},function(e){var r=e.target,n=e.currentTarget;return{target:r,currentTarget:n}}),le=j(),or=j(),ir=Ze({async:!0}),cr=[],V=l.forwardRef(function(r,n){var t,a=l.useState(),o=a[0],u=a[1],i=l.useRef(),s=l.useRef(!1),d=l.useRef(null),f=r.children,c=r.disabled,m=r.noFocusGuards,v=r.persistentFocus,b=r.crossFrame,h=r.autoFocus;r.allowTextSelection;var F=r.group,y=r.className,w=r.whiteList,Le=r.hasPositiveIndices,ee=r.shards,De=ee===void 0?cr:ee,re=r.as,Me=re===void 0?"div":re,ne=r.lockProps,_e=ne===void 0?{}:ne,Ue=r.sideCar,P=r.returnFocus,We=r.focusOptions,D=r.onActivation,M=r.onDeactivation,Be=l.useState({}),Re=Be[0],Ge=l.useCallback(function(){d.current=d.current||document&&document.activeElement,i.current&&D&&D(i.current),s.current=!0},[D]),He=l.useCallback(function(){s.current=!1,M&&M(i.current)},[M]);l.useEffect(function(){c||(d.current=null)},[]);var qe=l.useCallback(function(g){var T=d.current;if(T&&T.focus){var _=typeof P=="function"?P(T):P;if(_){var ae=typeof _=="object"?_:void 0;d.current=null,g?Promise.resolve().then(function(){return T.focus(ae)}):T.focus(ae)}}},[P]),$e=l.useCallback(function(g){s.current&&de.useMedium(g)},[]),je=le.useMedium,Ve=l.useCallback(function(g){i.current!==g&&(i.current=g,u(g))},[]),Ke=G((t={},t[se]=c&&"disabled",t[H]=F,t),_e),te=m!==!0,Ye=te&&m!=="tail",ze=er([n,Ve]);return l.createElement(l.Fragment,null,te&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:c?-1:0,style:U}),Le?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:c?-1:1,style:U}):null],!c&&l.createElement(Ue,{id:Re,sideCar:ir,observed:o,disabled:c,persistentFocus:v,crossFrame:b,autoFocus:h,whiteList:w,shards:De,onActivation:Ge,onDeactivation:He,returnFocus:qe,focusOptions:We}),l.createElement(Me,G({ref:ze},Ke,{className:y,onBlur:je,onFocus:$e}),f),Ye&&l.createElement("div",{"data-focus-guard":!0,tabIndex:c?-1:0,style:U}))});V.propTypes={};V.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const ve=V;function fr(e,r){function n(t){return t.displayName||t.name||"Component"}return function(a){var o=[],u;function i(){u=e(o.map(function(d){return d.props})),r(u)}var s=function(d){rr(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return u};var c=f.prototype;return c.componentDidMount=function(){o.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var v=o.indexOf(this);o.splice(v,1),i()},c.render=function(){return Xe.createElement(a,this.props)},f}(l.PureComponent);return nr(s,"displayName","SideEffect("+n(a)+")"),s}}var p=function(e){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=e[n];return r},C=function(e){return Array.isArray(e)?e:[e]},me=function(e){return Array.isArray(e)?e[0]:e},sr=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var r=window.getComputedStyle(e,null);return!r||!r.getPropertyValue?!1:r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"},be=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},he=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},dr=function(e,r){return!e||he(e)||!sr(e)&&r(be(e))},pe=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=dr(r,pe.bind(void 0,e));return e.set(r,t),t},lr=function(e,r){return e&&!he(e)?br(e)?r(be(e)):!1:!0},Fe=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=lr(r,Fe.bind(void 0,e));return e.set(r,t),t},ge=function(e){return e.dataset},vr=function(e){return e.tagName==="BUTTON"},ye=function(e){return e.tagName==="INPUT"},Oe=function(e){return ye(e)&&e.type==="radio"},mr=function(e){return!((ye(e)||vr(e))&&(e.type==="hidden"||e.disabled))},br=function(e){var r=e.getAttribute(ur);return![!0,"true",""].includes(r)},K=function(e){var r;return!!(e&&(!((r=ge(e))===null||r===void 0)&&r.focusGuard))},N=function(e){return!K(e)},hr=function(e){return!!e},pr=function(e,r){var n=e.tabIndex-r.tabIndex,t=e.index-r.index;if(n){if(!e.tabIndex)return 1;if(!r.tabIndex)return-1}return n||t},Ie=function(e,r,n){return p(e).map(function(t,a){return{node:t,index:a,tabIndex:n&&t.tabIndex===-1?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}}).filter(function(t){return!r||t.tabIndex>=0}).sort(pr)},Fr=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],Y=Fr.join(","),gr="".concat(Y,", [data-focus-guard]"),xe=function(e,r){return p((e.shadowRoot||e).children).reduce(function(n,t){return n.concat(t.matches(r?gr:Y)?[t]:[],xe(t))},[])},yr=function(e,r){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?L([e.contentDocument.body],r):[e]},L=function(e,r){return e.reduce(function(n,t){var a,o=xe(t,r),u=(a=[]).concat.apply(a,o.map(function(i){return yr(i,r)}));return n.concat(u,t.parentNode?p(t.parentNode.querySelectorAll(Y)).filter(function(i){return i===t}):[])},[])},Or=function(e){var r=e.querySelectorAll("[".concat(ar,"]"));return p(r).map(function(n){return L([n])}).reduce(function(n,t){return n.concat(t)},[])},z=function(e,r){return p(e).filter(function(n){return pe(r,n)}).filter(function(n){return mr(n)})},ue=function(e,r){return r===void 0&&(r=new Map),p(e).filter(function(n){return Fe(r,n)})},q=function(e,r,n){return Ie(z(L(e,n),r),!0,n)},oe=function(e,r){return Ie(z(L(e),r),!1)},Ir=function(e,r){return z(Or(e),r)},I=function(e,r){return e.shadowRoot?I(e.shadowRoot,r):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,r)?!0:p(e.children).some(function(n){var t;if(n instanceof HTMLIFrameElement){var a=(t=n.contentDocument)===null||t===void 0?void 0:t.body;return a?I(a,r):!1}return I(n,r)})},xr=function(e){for(var r=new Set,n=e.length,t=0;t<n;t+=1)for(var a=t+1;a<n;a+=1){var o=e[t].compareDocumentPosition(e[a]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&r.add(a),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&r.add(t)}return e.filter(function(u,i){return!r.has(i)})},Ee=function(e){return e.parentNode?Ee(e.parentNode):e},J=function(e){var r=C(e);return r.filter(Boolean).reduce(function(n,t){var a=t.getAttribute(H);return n.push.apply(n,a?xr(p(Ee(t).querySelectorAll("[".concat(H,'="').concat(a,'"]:not([').concat(se,'="disabled"])')))):[t]),n},[])},Er=function(e){try{return e()}catch{return}},A=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var r=e.activeElement;return r.shadowRoot?A(r.shadowRoot):r instanceof HTMLIFrameElement&&Er(function(){return r.contentWindow.document})?A(r.contentWindow.document):r}},Tr=function(e,r){return e===r},Ar=function(e,r){return!!p(e.querySelectorAll("iframe")).some(function(n){return Tr(n,r)})},Te=function(e,r){return r===void 0&&(r=A(me(e).ownerDocument)),!r||r.dataset&&r.dataset.focusGuard?!1:J(e).some(function(n){return I(n,r)||Ar(n,r)})},Sr=function(e){e===void 0&&(e=document);var r=A(e);return r?p(e.querySelectorAll("[".concat(tr,"]"))).some(function(n){return I(n,r)}):!1},wr=function(e,r){return r.filter(Oe).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},Q=function(e,r){return Oe(e)&&e.name?wr(e,r):e},Pr=function(e){var r=new Set;return e.forEach(function(n){return r.add(Q(n,e))}),e.filter(function(n){return r.has(n)})},ie=function(e){return e[0]&&e.length>1?Q(e[0],e):e[0]},ce=function(e,r){return e.length>1?e.indexOf(Q(e[r],e)):r},Ae="NEW_FOCUS",Cr=function(e,r,n,t){var a=e.length,o=e[0],u=e[a-1],i=K(n);if(!(n&&e.indexOf(n)>=0)){var s=n!==void 0?r.indexOf(n):-1,d=t?r.indexOf(t):s,f=t?e.indexOf(t):-1,c=s-d,m=r.indexOf(o),v=r.indexOf(u),b=Pr(r),h=n!==void 0?b.indexOf(n):-1,F=h-(t?b.indexOf(t):s),y=ce(e,0),w=ce(e,a-1);if(s===-1||f===-1)return Ae;if(!c&&f>=0)return f;if(s<=m&&i&&Math.abs(c)>1)return w;if(s>=v&&i&&Math.abs(c)>1)return y;if(c&&Math.abs(F)>1)return f;if(s<=m)return w;if(s>v)return y;if(c)return Math.abs(c)>1?f:(a+f+c)%a}},Nr=function(e){return function(r){var n,t=(n=ge(r))===null||n===void 0?void 0:n.autofocus;return r.autofocus||t!==void 0&&t!=="false"||e.indexOf(r)>=0}},kr=function(e,r,n){var t=e.map(function(o){var u=o.node;return u}),a=ue(t.filter(Nr(n)));return a&&a.length?ie(a):ie(ue(r))},$=function(e,r){return r===void 0&&(r=[]),r.push(e),e.parentNode&&$(e.parentNode.host||e.parentNode,r),r},W=function(e,r){for(var n=$(e),t=$(r),a=0;a<n.length;a+=1){var o=n[a];if(t.indexOf(o)>=0)return o}return!1},Se=function(e,r,n){var t=C(e),a=C(r),o=t[0],u=!1;return a.filter(Boolean).forEach(function(i){u=W(u||i,i)||u,n.filter(Boolean).forEach(function(s){var d=W(o,s);d&&(!u||I(d,u)?u=d:u=W(d,u))})}),u},Lr=function(e,r){return e.reduce(function(n,t){return n.concat(Ir(t,r))},[])},Dr=function(e,r){var n=new Map;return r.forEach(function(t){return n.set(t.node,t)}),e.map(function(t){return n.get(t)}).filter(hr)},Mr=function(e,r){var n=A(C(e).length>0?document:me(e).ownerDocument),t=J(e).filter(N),a=Se(n||e,e,t),o=new Map,u=oe(t,o),i=q(t,o).filter(function(v){var b=v.node;return N(b)});if(!(!i[0]&&(i=u,!i[0]))){var s=oe([a],o).map(function(v){var b=v.node;return b}),d=Dr(s,i),f=d.map(function(v){var b=v.node;return b}),c=Cr(f,s,n,r);if(c===Ae){var m=kr(u,f,Lr(t,o));if(m)return{node:m};console.warn("focus-lock: cannot find any node to move focus into");return}return c===void 0?c:d[c]}},_r=function(e){var r=J(e).filter(N),n=Se(e,e,r),t=new Map,a=q([n],t,!0),o=q(r,t).filter(function(u){var i=u.node;return N(i)}).map(function(u){var i=u.node;return i});return a.map(function(u){var i=u.node,s=u.index;return{node:i,index:s,lockItem:o.indexOf(i)>=0,guard:K(i)}})},Ur=function(e,r){"focus"in e&&e.focus(r),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},B=0,R=!1,we=function(e,r,n){n===void 0&&(n={});var t=Mr(e,r);if(!R&&t){if(B>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),R=!0,setTimeout(function(){R=!1},1);return}B++,Ur(t.node,n.focusOptions),B--}};function X(e){setTimeout(e,1)}var Wr=function(){return document&&document.activeElement===document.body},Br=function(){return Wr()||Sr()},x=null,O=null,E=null,S=!1,Rr=function(){return!0},Gr=function(r){return(x.whiteList||Rr)(r)},Hr=function(r,n){E={observerNode:r,portaledElement:n}},qr=function(r){return E&&E.portaledElement===r};function fe(e,r,n,t){var a=null,o=e;do{var u=t[o];if(u.guard)u.node.dataset.focusAutoGuard&&(a=u);else if(u.lockItem){if(o!==e)return;a=null}else break}while((o+=n)!==r);a&&(a.node.tabIndex=0)}var $r=function(r){return r&&"current"in r?r.current:r},jr=function(r){return r?!!S:S==="meanwhile"},Vr=function e(r,n,t){return n&&(n.host===r&&(!n.activeElement||t.contains(n.activeElement))||n.parentNode&&e(r,n.parentNode,t))},Kr=function(r,n){return n.some(function(t){return Vr(r,t,t)})},k=function(){var r=!1;if(x){var n=x,t=n.observed,a=n.persistentFocus,o=n.autoFocus,u=n.shards,i=n.crossFrame,s=n.focusOptions,d=t||E&&E.portaledElement,f=document&&document.activeElement;if(d){var c=[d].concat(u.map($r).filter(Boolean));if((!f||Gr(f))&&(a||jr(i)||!Br()||!O&&o)&&(d&&!(Te(c)||f&&Kr(f,c)||qr(f))&&(document&&!O&&f&&!o?(f.blur&&f.blur(),document.body.focus()):(r=we(c,O,{focusOptions:s}),E={})),S=!1,O=document&&document.activeElement),document){var m=document&&document.activeElement,v=_r(c),b=v.map(function(h){var F=h.node;return F}).indexOf(m);b>-1&&(v.filter(function(h){var F=h.guard,y=h.node;return F&&y.dataset.focusAutoGuard}).forEach(function(h){var F=h.node;return F.removeAttribute("tabIndex")}),fe(b,v.length,1,v),fe(b,-1,-1,v))}}}return r},Pe=function(r){k()&&r&&(r.stopPropagation(),r.preventDefault())},Z=function(){return X(k)},Yr=function(r){var n=r.target,t=r.currentTarget;t.contains(n)||Hr(t,n)},zr=function(){return null},Ce=function(){S="just",X(function(){S="meanwhile"})},Jr=function(){document.addEventListener("focusin",Pe),document.addEventListener("focusout",Z),window.addEventListener("blur",Ce)},Qr=function(){document.removeEventListener("focusin",Pe),document.removeEventListener("focusout",Z),window.removeEventListener("blur",Ce)};function Xr(e){return e.filter(function(r){var n=r.disabled;return!n})}function Zr(e){var r=e.slice(-1)[0];r&&!x&&Jr();var n=x,t=n&&r&&r.id===n.id;x=r,n&&!t&&(n.onDeactivation(),e.filter(function(a){var o=a.id;return o===n.id}).length||n.returnFocus(!r)),r?(O=null,(!t||n.observed!==r.observed)&&r.onActivation(),k(),X(k)):(Qr(),O=null)}de.assignSyncMedium(Yr);le.assignMedium(Z);or.assignMedium(function(e){return e({moveFocusInside:we,focusInside:Te})});const en=fr(Xr,Zr)(zr);var Ne=l.forwardRef(function(r,n){return l.createElement(ve,G({sideCar:en,ref:n},r))}),ke=ve.propTypes||{};ke.sideCar;Qe(ke,["sideCar"]);Ne.propTypes={};const rn=Ne,nn=e=>{const{children:r,returnFocus:n=!0,...t}=e;return Je(rn,{returnFocus:n,...t,children:r})};nn.displayName="FocusTrap";export{nn as F};
//# sourceMappingURL=FocusTrap-244593d1.js.map
